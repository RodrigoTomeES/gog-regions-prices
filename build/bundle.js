var app=function(){"use strict";function e(){}function t(e){return e()}function n(){return Object.create(null)}function o(e){e.forEach(t)}function l(e){return"function"==typeof e}function r(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}let s,i;function c(e,t){return s||(s=document.createElement("a")),s.href=t,e===s.href}function a(e,t){e.appendChild(t)}function u(e,t,n){e.insertBefore(t,n||null)}function d(e){e.parentNode.removeChild(e)}function f(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function g(e){return document.createElement(e)}function p(e){return document.createTextNode(e)}function m(){return p(" ")}function h(e,t,n,o){return e.addEventListener(t,n,o),()=>e.removeEventListener(t,n,o)}function x(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function y(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function b(e,t){e.value=null==t?"":t}function w(e){i=e}function v(e){(function(){if(!i)throw new Error("Function called outside component initialization");return i})().$$.on_mount.push(e)}const $=[],k=[],_=[],j=[],E=Promise.resolve();let L=!1;function C(e){_.push(e)}const P=new Set;let B=0;function I(){const e=i;do{for(;B<$.length;){const e=$[B];B++,w(e),T(e.$$)}for(w(null),$.length=0,B=0;k.length;)k.pop()();for(let e=0;e<_.length;e+=1){const t=_[e];P.has(t)||(P.add(t),t())}_.length=0}while($.length);for(;j.length;)j.pop()();L=!1,P.clear(),w(e)}function T(e){if(null!==e.fragment){e.update(),o(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(C)}}const G=new Set;const R="undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:global;function O(e,t){-1===e.$$.dirty[0]&&($.push(e),L||(L=!0,E.then(I)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function M(r,s,c,a,u,f,g,p=[-1]){const m=i;w(r);const h=r.$$={fragment:null,ctx:null,props:f,update:e,not_equal:u,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(s.context||(m?m.$$.context:[])),callbacks:n(),dirty:p,skip_bound:!1,root:s.target||m.$$.root};g&&g(h.root);let x=!1;if(h.ctx=c?c(r,s.props||{},((e,t,...n)=>{const o=n.length?n[0]:t;return h.ctx&&u(h.ctx[e],h.ctx[e]=o)&&(!h.skip_bound&&h.bound[e]&&h.bound[e](o),x&&O(r,e)),t})):[],h.update(),x=!0,o(h.before_update),h.fragment=!!a&&a(h.ctx),s.target){if(s.hydrate){const e=function(e){return Array.from(e.childNodes)}(s.target);h.fragment&&h.fragment.l(e),e.forEach(d)}else h.fragment&&h.fragment.c();s.intro&&((y=r.$$.fragment)&&y.i&&(G.delete(y),y.i(b))),function(e,n,r,s){const{fragment:i,on_mount:c,on_destroy:a,after_update:u}=e.$$;i&&i.m(n,r),s||C((()=>{const n=c.map(t).filter(l);a?a.push(...n):o(n),e.$$.on_mount=[]})),u.forEach(C)}(r,s.target,s.anchor,s.customElement),I()}var y,b;w(m)}const{window:S}=R;function U(e,t,n){const o=e.slice();return o[16]=t[n],o}function A(e,t,n){const o=e.slice();return o[19]=t[n],o}function F(e){let t,n,o;return{c(){t=g("p"),n=p("Last update:\n              "),o=p(e[2]),x(t,"class","text-sm text-gray-700 text-center pt-1")},m(e,l){u(e,t,l),a(t,n),a(t,o)},p(e,t){4&t&&y(o,e[2])},d(e){e&&d(t)}}}function z(e){let t,n,o,l=e[16].price[e[19].country]+"";return{c(){t=g("span"),n=p(l),o=p("$"),x(t,"class","font-medium pl-2 self-center")},m(e,l){u(e,t,l),a(t,n),a(t,o)},p(e,t){16&t&&l!==(l=e[16].price[e[19].country]+"")&&y(n,l)},d(e){e&&d(t)}}}function N(e){let t,n,o,l,r,s,i,c=e[16].sale[e[19].country]+"",f=e[16].price[e[19].country]+"";return{c(){t=g("span"),n=p(c),o=p("$"),l=m(),r=g("span"),s=p(f),i=p("$"),x(t,"class","font-medium text-blue-700 pl-2 self-center"),x(r,"class","text-sm text-red-700 line-through pl-2 self-center")},m(e,c){u(e,t,c),a(t,n),a(t,o),u(e,l,c),u(e,r,c),a(r,s),a(r,i)},p(e,t){16&t&&c!==(c=e[16].sale[e[19].country]+"")&&y(n,c),16&t&&f!==(f=e[16].price[e[19].country]+"")&&y(s,f)},d(e){e&&d(t),e&&d(l),e&&d(r)}}}function H(e){let t,n,o,l,r,s,i;function f(e,t){return e[16].sale?N:z}let p=f(e),h=p(e);return{c(){t=g("div"),n=g("img"),s=m(),h.c(),i=m(),x(n,"class","h-full"),c(n.src,o=`./flags/${e[19].country.toLowerCase()}.svg`)||x(n,"src",o),x(n,"alt",l=`${e[19].country} Flag`),x(n,"title",r=`${e[19].country} Flag`),x(t,"class","flex flex-inline h-5")},m(e,o){u(e,t,o),a(t,n),a(t,s),h.m(t,null),a(t,i)},p(e,s){16&s&&!c(n.src,o=`./flags/${e[19].country.toLowerCase()}.svg`)&&x(n,"src",o),16&s&&l!==(l=`${e[19].country} Flag`)&&x(n,"alt",l),16&s&&r!==(r=`${e[19].country} Flag`)&&x(n,"title",r),p===(p=f(e))&&h?h.p(e,s):(h.d(1),h=p(e),h&&(h.c(),h.m(t,i)))},d(e){e&&d(t),h.d()}}}function q(e){let t,n,o,r,s,i,b,w,v,$,k,_,j,E,L,C,P,B,I=e[16].title+"",T=e[16].category+"",G=e[16].countryByPrice,R=[];for(let t=0;t<G.length;t+=1)R[t]=H(A(e,G,t));return{c(){t=g("div"),n=g("div"),o=g("img"),b=m(),w=g("div"),v=g("div"),$=p(I),k=m(),_=g("div"),j=p(T),E=m(),L=g("div");for(let e=0;e<R.length;e+=1)R[e].c();C=m(),x(o,"class","w-full"),c(o.src,r=e[16].image+"_200.jpg")||x(o,"src",r),x(o,"alt",s=e[16].title),x(o,"title",i=e[16].title),x(o,"loading","lazy"),x(v,"class","font-bold text-md"),x(_,"class","text-sm text-gray-600"),x(w,"class","px-2 py-2"),x(L,"class","pl-3 space-y-3 pb-3"),x(n,"class","rounded overflow-hidden hover:shadow-lg border-r border-b border-l border-gray-300 flex-1"),x(t,"class","cursor-pointer flex flex-col w-1/2 md:w-1/3 lg:w-1/4 xl:w-1/5 2xl:w-1/6 px-1 pb-3"),x(t,"role","listitem")},m(r,s){u(r,t,s),a(t,n),a(n,o),a(n,b),a(n,w),a(w,v),a(v,$),a(w,k),a(w,_),a(_,j),a(n,E),a(n,L);for(let e=0;e<R.length;e+=1)R[e].m(L,null);a(t,C),P||(B=h(t,"click",(function(){l(e[8](e[16].url))&&e[8](e[16].url).apply(this,arguments)})),P=!0)},p(t,n){if(e=t,16&n&&!c(o.src,r=e[16].image+"_200.jpg")&&x(o,"src",r),16&n&&s!==(s=e[16].title)&&x(o,"alt",s),16&n&&i!==(i=e[16].title)&&x(o,"title",i),16&n&&I!==(I=e[16].title+"")&&y($,I),16&n&&T!==(T=e[16].category+"")&&y(j,T),16&n){let t;for(G=e[16].countryByPrice,t=0;t<G.length;t+=1){const o=A(e,G,t);R[t]?R[t].p(o,n):(R[t]=H(o),R[t].c(),R[t].m(L,null))}for(;t<R.length;t+=1)R[t].d(1);R.length=G.length}},d(e){e&&d(t),f(R,e),P=!1,B()}}}function D(t){let n,l,r,s,i,c,w,v,$,k,_,j,E,L,C,P,B,I,T,G,R,O,M,A,z,N,H,D,V,W,J,K,Q,X,Y,Z,ee,te,ne,oe,le,re,se=t[2]&&F(t),ie=t[4],ce=[];for(let e=0;e<ie.length;e+=1)ce[e]=q(U(t,ie,e));return{c(){n=g("main"),l=g("div"),l.innerHTML='<div class="flex items-center justify-between gap-2"><div class="text-4xl" id="BlockInstallClose">x</div> \n      <div class="w-12"><img src="./icons/android/android-launchericon-48-48.png" alt="GOG Regions Price logo"/></div> \n      <div class="max-w-[175px]"><span class="block font-bold">GOG Regions Price</span> \n        <span class="block text-xs">Compare GOG&#39;s prices between all regions (in dollars)</span></div> \n      <div><button id="BlockInstallButton" class="py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500">Install</button></div></div>',r=m(),s=g("div"),i=g("div"),c=g("div"),w=g("div"),v=g("h1"),v.textContent="GOG Regions Prices",$=m(),k=g("p"),k.innerHTML='If your country has a different price report it in\n            <a class="text-blue-700 underline" href="https://github.com/RodrigoTomeES/gog-regions-prices">Github</a>',_=m(),se&&se.c(),j=m(),E=g("div"),L=g("div"),C=g("label"),C.textContent="Search Term",P=m(),B=g("input"),I=m(),T=g("div"),G=g("button"),G.innerHTML='<span class="absolute left-0 inset-y-0 flex items-center pl-3"></span>\n            Search!',R=m(),O=g("div"),M=g("div");for(let e=0;e<ce.length;e+=1)ce[e].c();A=m(),z=g("div"),N=g("div"),H=g("button"),D=p("<< Previous"),W=m(),J=g("div"),K=g("div"),Q=p(t[0]),X=p("\n          /\n          "),Y=p(t[3]),Z=m(),ee=g("div"),te=g("button"),ne=p("Next >>"),x(l,"class","hidden bg-white shadow-2xl fixed bottom-0 left-0 right-0 z-50 p-4"),x(l,"id","BlockInstall"),x(v,"class","text-center text-3xl font-extrabold text-gray-900 "),x(k,"class","text-sm text-gray-700 text-center"),x(w,"class","justify-center w-full"),x(C,"for","searchterm"),x(C,"class","sr-only"),x(B,"id","searchterm"),x(B,"name","searchterm"),x(B,"type","text"),B.required=!0,x(B,"class","appearance-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm"),x(B,"placeholder","Search for your game!"),x(E,"class","rounded-md shadow-sm -space-y-px"),x(G,"type","submit"),x(G,"class","group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"),x(c,"class","block space-y-3 w-full md:w-1/3 py-3"),x(i,"class","w-full flex justify-center"),x(M,"class","flex flex-wrap w-full"),x(M,"role","list"),x(O,"class","flex w-full"),x(O,"id","games"),H.disabled=V=t[0]<=1,x(H,"class","disabled:opacity-50 group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"),x(N,"class","w-1/3 px-1 "),x(K,"class","group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"),x(J,"class","w-1/3 px-1 "),te.disabled=oe=t[0]>=t[3],x(te,"class","disabled:opacity-50 group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"),x(ee,"class","w-1/3 px-1 "),x(z,"class","flex flex-inline w-full mb-2"),x(s,"class","flex flex-wrap justify-center items-center"),x(n,"class","container mx-auto px-3")},m(e,o){u(e,n,o),a(n,l),a(n,r),a(n,s),a(s,i),a(i,c),a(c,w),a(w,v),a(w,$),a(w,k),a(w,_),se&&se.m(w,null),a(c,j),a(c,E),a(E,L),a(L,C),a(L,P),a(L,B),b(B,t[1]),a(c,I),a(c,T),a(T,G),a(s,R),a(s,O),a(O,M);for(let e=0;e<ce.length;e+=1)ce[e].m(M,null);a(s,A),a(s,z),a(z,N),a(N,H),a(H,D),a(z,W),a(z,J),a(J,K),a(K,Q),a(K,X),a(K,Y),a(z,Z),a(z,ee),a(ee,te),a(te,ne),le||(re=[h(S,"keydown",t[7]),h(B,"input",t[14]),h(B,"keypress",t[6]),h(G,"click",t[5]),h(H,"click",t[10]),h(te,"click",t[9])],le=!0)},p(e,[t]){if(e[2]?se?se.p(e,t):(se=F(e),se.c(),se.m(w,null)):se&&(se.d(1),se=null),2&t&&B.value!==e[1]&&b(B,e[1]),272&t){let n;for(ie=e[4],n=0;n<ie.length;n+=1){const o=U(e,ie,n);ce[n]?ce[n].p(o,t):(ce[n]=q(o),ce[n].c(),ce[n].m(M,null))}for(;n<ce.length;n+=1)ce[n].d(1);ce.length=ie.length}1&t&&V!==(V=e[0]<=1)&&(H.disabled=V),1&t&&y(Q,e[0]),8&t&&y(Y,e[3]),9&t&&oe!==(oe=e[0]>=e[3])&&(te.disabled=oe)},i:e,o:e,d(e){e&&d(n),se&&se.d(),f(ce,e),le=!1,o(re)}}}function V(e,t,n){let o,{searchResult:l=[]}=t,{searchTerm:r=""}=t,{games:s=[]}=t,{sales:i=[]}=t,{lastUpdated:c=""}=t,{totalPages:a=-1}=t,{currentPage:u=-1}=t;async function d(){""==r.trim()?n(11,l=i):(0===s.length&&await fetch("./games.json").then((e=>e.json())).then((e=>{n(12,s=e.sort(((e,t)=>e.title.localeCompare(t.title))))})),n(11,l=s.filter((e=>e.title.toLowerCase().includes(r.trim().toLowerCase())))),n(3,a=Math.floor(l.length/24)+1),n(0,u=1))}v((async()=>{let e;await fetch("./sales.json").then((e=>e.json())).then((e=>{n(13,i=e.sort(((e,t)=>e.title.localeCompare(t.title)))),n(11,l=i),n(3,a=Math.floor(i.length/24)+1),n(0,u=1)})),await fetch("./lastUpdate.json").then((e=>e.json())).then((e=>{const t=e.last,o=t.substr(8,2),l=t.substr(5,2),r=t.substr(11,5);n(2,c=`${o}/${l} - ${r}`)}));const t=document.getElementById("BlockInstall"),o=document.getElementById("BlockInstallButton"),r=document.getElementById("BlockInstallClose");window.addEventListener("beforeinstallprompt",(n=>{n.preventDefault(),e=n,t.classList.remove("hidden"),console.log("'beforeinstallprompt' event was fired.")})),o.addEventListener("click",(async()=>{t.classList.add("hidden"),e.prompt();const{outcome:n}=await e.userChoice;console.log(`User response to the install prompt: ${n}`),e=null})),r.addEventListener("click",(async()=>{t.classList.add("hidden"),e=null})),window.addEventListener("appinstalled",(()=>{t.classList.add("hidden"),e=null,console.log("PWA was installed")}))}));function f(){u<a&&p(1)}function g(){u>1&&p(-1)}function p(e){n(0,u+=e),document.getElementById("games").scrollIntoView()}return e.$$set=e=>{"searchResult"in e&&n(11,l=e.searchResult),"searchTerm"in e&&n(1,r=e.searchTerm),"games"in e&&n(12,s=e.games),"sales"in e&&n(13,i=e.sales),"lastUpdated"in e&&n(2,c=e.lastUpdated),"totalPages"in e&&n(3,a=e.totalPages),"currentPage"in e&&n(0,u=e.currentPage)},e.$$.update=()=>{2049&e.$$.dirty&&n(4,o=l.slice(24*(u-1),24*u))},[u,r,c,a,o,d,e=>{13===e.charCode&&d()},e=>{"searchterm"!==e.target.id&&(37===e.keyCode&&g(),39===e.keyCode&&f())},e=>{window.open(`https://www.gog.com${e}`,"_blank").focus()},f,g,l,s,i,function(){r=this.value,n(1,r)}]}return new class extends class{$destroy(){!function(e,t){const n=e.$$;null!==n.fragment&&(o(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}(this,1),this.$destroy=e}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}{constructor(e){super(),M(this,e,V,D,r,{searchResult:11,searchTerm:1,games:12,sales:13,lastUpdated:2,totalPages:3,currentPage:0})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
